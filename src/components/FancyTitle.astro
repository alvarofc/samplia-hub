---
export interface Props { text: string }
const { text } = Astro.props as Props;
---
<div class="fancy-title" aria-label={text}>
  <svg viewBox="0 0 1200 180" role="img" aria-hidden="true" preserveAspectRatio="xMidYMid meet">
    <defs>
      <linearGradient id="ft-grad" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="600" y2="0" spreadMethod="repeat">
        <stop offset="0" stop-color="#D4145A" />
        <stop offset="0.25" stop-color="#FF5D73" />
        <stop offset="0.5" stop-color="#FF9AA8" />
        <stop offset="0.75" stop-color="#FF5D73" />
        <stop offset="1" stop-color="#D4145A" />
        <animateTransform attributeName="gradientTransform" type="translate" from="0,0" to="600,0" dur="11s" repeatCount="indefinite" />
      </linearGradient>
      <filter id="ft-noise" x="-20%" y="-20%" width="140%" height="140%">
        <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2" stitchTiles="stitch" result="noise" />
        <feColorMatrix in="noise" type="saturate" values="0" />
        <feComponentTransfer>
          <feFuncA type="table" tableValues="0 0.08" />
        </feComponentTransfer>
      </filter>
    </defs>

    <g class="wobble">
      <!-- Fill -->
      <text x="50%" y="62%" text-anchor="middle" dominant-baseline="middle" class="title-fill">
        {text}
      </text>
      <!-- Shimmer stroke overlay -->
      <text x="50%" y="62%" text-anchor="middle" dominant-baseline="middle" class="title-shimmer">
        {text}
      </text>
    </g>
  </svg>
</div>

<style>
  .fancy-title{ display:block }
  .fancy-title svg{ width:100%; height:clamp(80px, 14vw, 180px); overflow:visible }
  .fancy-title .title-fill{
    font: 900 clamp(42px,7vw,88px) 'Fraunces', ui-serif, Georgia, serif;
    letter-spacing: -.02em;
    fill: url(#ft-grad);
    paint-order: stroke fill;
    stroke-width: 1.2px;
    stroke: rgba(0,0,0,.04);
  }
  .fancy-title .title-shimmer{
    font: inherit;
    fill: none;
    stroke: rgba(255,255,255,.55);
    stroke-width: 1.4px;
    stroke-linecap: round;
    stroke-dasharray: 140 22;
    filter: url(#ft-noise);
    animation: ft-shimmer 4.6s ease-in-out infinite alternate;
  }
  .fancy-title .wobble{ animation: ft-wobble 8s ease-in-out infinite; transform-origin: 50% 50% }

  @keyframes ft-shimmer{ 0%{ stroke-dashoffset: 0 } 100%{ stroke-dashoffset: -360 } }
  @keyframes ft-wobble{
    0%,100%{ transform: translateY(0) rotate(0deg) }
    25%{ transform: translateY(-1px) rotate(-.2deg) }
    50%{ transform: translateY(1px) rotate(.25deg) }
    75%{ transform: translateY(-.5px) rotate(-.15deg) }
  }
</style>